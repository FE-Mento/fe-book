# π― Chapter 5: HTTP λ©”μ„λ“ ν™μ©

## π„Β 1. ν΄λΌμ΄μ–ΈνΈμ—μ„ μ„λ²„λ΅ λ°μ΄ν„° μ „μ†΅

### π»Β 1-1. λ°μ΄ν„° μ „λ‹¬ λ°©μ‹μ€ ν¬κ² 2κ°€μ§€

- μΏΌλ¦¬ νλΌλ―Έν„°λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅
    - GET
    - μ£Όλ΅ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
- λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅
    - POST, PUT, PATCH
    - νμ›κ°€μ…, μƒν’ μ£Όλ¬Έ, λ¦¬μ†μ¤ λ“±λ΅, λ¦¬μ†μ¤ λ³€κ²½

### π»Β 1-2. 4κ°€μ§€ μƒν™©

- μ •μ  λ°μ΄ν„° μ΅°ν
    - μ΄λ―Έμ§€, μ •μ  ν…μ¤νΈ λ¬Έμ„
- λ™μ  λ°μ΄ν„° μ΅°ν
    - μ£Όλ΅ κ²€μƒ‰, κ²μ‹ν λ©λ΅μ—μ„ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
- HTML FORMμ„ ν†µν• λ°μ΄ν„° μ „μ†΅
    - νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ°μ΄ν„° λ³€κ²½
- HTTP APIλ¥Ό ν†µν• λ°μ΄ν„° μ „μ†΅
    - νμ›κ°€μ…, μƒν’ μ£Όλ¬Έ, λ°μ΄ν„° λ³€κ²½
    - μ„λ²„ to μ„λ²„, μ•± ν΄λΌμ΄μ–ΈνΈ, μ›Ή ν΄λΌμ΄μ–ΈνΈ(Ajax)

### π»Β 1-3. μ •μ  λ°μ΄ν„° μ΅°ν

- μΏΌλ¦¬ νλΌλ―Έν„° λ―Έμ‚¬μ©

```
GET /static/star.jpng HTTP/1.1
Host: localhost: 8080
```

- μ΄λ―Έμ§€, μ •μ  ν…μ¤νΈ λ¬Έμ„
- μ΅°νλ” GET μ‚¬μ©
- μ •μ  λ°μ΄ν„°λ” μΌλ°μ μΌλ΅ μΏΌλ¦¬ νλΌλ―Έν„° μ—†μ΄ λ¦¬μ†μ¤ κ²½λ΅λ΅ λ‹¨μν•κ² μ΅°νκ°€ κ°€λ¥ν•λ‹¤.

### π»Β 1-4. λ™μ  λ°μ΄ν„° μ΅°ν

- μΏΌλ¦¬ νλΌλ―Έν„° μ‚¬μ©

```
GET /search?q=hello&hl=ko HTTP/1.1
Host: www.google.com
```

- μ£Όλ΅ κ²€μƒ‰, κ²μ‹ν λ©λ΅μ—μ„ μ •λ ¬ ν•„ν„°(κ²€μƒ‰μ–΄)
- μ΅°ν μ΅°κ±΄μ„ μ¤„μ—¬μ£Όλ” ν•„ν„°, μ΅°ν κ²°κ³Όλ¥Ό μ •λ ¬ν•λ” μ •λ ¬ μ΅°κ±΄μ— μ£Όλ΅ μ‚¬μ©ν•λ‹¤.
- μ΅°νλ” GET μ‚¬μ©
- GETμ€ μΏΌλ¦¬ νλΌλ―Έν„° μ‚¬μ©ν•΄μ„ λ°μ΄ν„°λ¥Ό μ „λ‹¬ν•λ‹¤.

### π»Β 1-5. HTML Form λ°μ΄ν„° μ „μ†΅ μμ‹

- `<form method=β€postβ€>` POST μ „μ†΅ - μ €μ¥

```
POST /save HTTP/1.1
Host: localhost:8080
Content-Type: application/x-www-form-urlencoded

username=kim&age=20
```

- `<form method=β€getβ€>` GETμ€ μ΅°νμ—λ§ μ‚¬μ©ν•΄μ•Ό ν•λ‹¤. λ¦¬μ†μ¤ λ³€κ²½μ΄ λ°μƒν•λ” κ³³μ— μ‚¬μ©ν•λ©΄ μ•λλ‹¤.

```
GET /members?username=kim&age=20 HTTP/1.1
Host: localhost:8080
```

- `multipart/form-data` λ” νμΌ κ°™μ€ κ²ƒμ„ μ „μ†΅ν•  λ• μ‚¬μ©ν•λ‹¤.
- `<form method="post" enctype="multipart/form-data">` λ΅ μ‚¬μ©ν•λ‹¤.

```
POST /save HTTP/1.1
Host: localhost:8080
Content-Type: multipart/form-data;boundary=-----XXX
Content-Length: 10457

-----XXX
Content-Disposition: form-data; name="username"

kim
-----XXX
Content-Disposition: form-data; name="age"

20
-----XXX
Content-Disposition: form-data; name="file1"; filename="intro.png"
Content-Type:image/png

12312dsfsadfdmlaskdf...
-----XXX---
```

### π»Β 1-6. HTML Form λ°μ΄ν„° μ „μ†΅ μ •λ¦¬

- HTML Form submitμ‹ POST μ „μ†΅
    - μ) νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ, λ°μ΄ν„° λ³€κ²½
- Content-Type: application/x-www-form-urlencoded μ‚¬μ©
    - formμ λ‚΄μ©μ„ λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄μ„ μ „μ†΅(key=value, μΏΌλ¦¬ νλΌλ―Έν„° ν•μ‹)
    - μ „μ†΅ λ°μ΄ν„°λ¥Ό url encoding μ²λ¦¬
        - μ) abcκΉ€ β†’ abc%EA%B9%80
- HTML Formμ€ GET μ „μ†΅λ„ κ°€λ¥
- Content-Type: multipart/form-data
    - νμΌ μ—…λ΅λ“ κ°™μ€ λ°”μ΄λ„λ¦¬ λ°μ΄ν„° μ „μ†΅μ‹ μ‚¬μ©
    - λ‹¤λ¥Έ μΆ…λ¥μ μ—¬λ¬ νμΌκ³Ό νΌμ λ‚΄μ© ν•¨κ» μ „μ†΅ κ°€λ¥(κ·Έλμ„ μ΄λ¦„μ΄ multipart)
- μ°Έκ³  : HTML Form μ „μ†΅μ€ **GET, POST**λ§ μ§€μ›ν•λ‹¤.

### π»Β 1-7. HTTP API λ°μ΄ν„° μ „μ†΅

- μ„λ²„ to μ„λ²„
    - λ°±μ—”λ“ μ‹μ¤ν… ν†µμ‹ 
- μ•± ν΄λΌμ΄μ–ΈνΈ
    - μ•„μ΄ν°, μ•λ“λ΅μ΄λ“
- μ›Ή ν΄λΌμ΄μ–ΈνΈ
    - HTMLμ—μ„ Form μ „μ†΅ λ€μ‹  μλ°” μ¤ν¬λ¦½νΈλ¥Ό ν†µν• ν†µμ‹ μ— μ‚¬μ©(AJAX)
    - μ) React, VueJS κ°™μ€ μ›Ή ν΄λΌμ΄μ–ΈνΈμ™€ API ν†µμ‹ 
- POST, PUT, PATCH : λ©”μ‹μ§€ λ°”λ””λ¥Ό ν†µν•΄ λ°μ΄ν„° μ „μ†΅
- GET: μ΅°ν, μΏΌλ¦¬ νλΌλ―Έν„°λ΅ λ°μ΄ν„° μ „λ‹¬
- Content-Type: application/jsonμ„ μ£Όλ΅ μ‚¬μ©(μ‚¬μ‹¤μƒ ν‘μ¤€)
    - TEXT, XML, JSON λ“±λ“±

```
POST /members HTTP/1.1
Content-Type: application/json

{
	"username": "jaejun",
	"age": 20
}
```

## π„Β 2. HTTP API μ„¤κ³„ μμ‹

### π»Β 2-1. μμ‹

- HTTP API - μ»¬λ ‰μ…
    - POST κΈ°λ° λ“±λ΅
    - μ) νμ› κ΄€λ¦¬ API μ κ³µ
- HTTP API - μ¤ν† μ–΄
    - PUT κΈ°λ° λ“±λ΅
    - μ) μ •μ  μ»¨ν…μΈ  κ΄€λ¦¬, μ›κ²© νμΌ κ΄€λ¦¬
- HTML FORM μ‚¬μ©
    - μ›Ή νμ΄μ§€ νμ› κ΄€λ¦¬
    - GET, POSTλ§ μ§€μ›

### π»Β 2-2. νμ› κ΄€λ¦¬ μ‹μ¤ν… API μ„¤κ³„ - POST κΈ°λ° λ“±λ΅

- νμ› λ©λ΅ : /members β†’ GET
- νμ› λ“±λ΅ : /members β†’ POST
- νμ› μ΅°ν : /members/{id} β†’ GET
- νμ› μμ • : /members/{id} β†’ PATCH,PUT,POST
- νμ› μ‚­μ  : /members/{id} β†’ DELETE

### π»Β 2-3. POST κΈ°λ° λ“±λ΅ νΉμ§•

- ν΄λΌμ΄μ–ΈνΈλ” λ“±λ΅λ  λ¦¬μ†μ¤μ URIλ¥Ό λ¨λ¥Έλ‹¤.
    - νμ› λ“±λ΅ : /members β†’ POST
    - POST /members
- μ„λ²„κ°€ μƒλ΅ λ“±λ΅λ λ¦¬μ†μ¤ URIλ¥Ό μƒμ„±ν•΄μ¤€λ‹¤.

```
HTTP/1.1 201 Created
Location: /members/100
```

- μ»¬λ ‰μ…(Collection)
    - μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬
    - μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
    - μ—¬κΈ°μ„ μ»¬λ ‰μ…μ€ /members

### π»Β 2-4. νμΌ κ΄€λ¦¬ μ‹μ¤ν… API μ„¤κ³„ - PUT κΈ°λ° λ“±λ΅

- νμΌ λ©λ΅ : /files β†’ GET
- νμΌ μ΅°ν : /files/{filename} β†’ GET
- νμΌ λ“±λ΅ : /files/{filename} β†’ PUT
- νμΌ μ‚­μ  : /files/{filename} β†’ DELETE
- νμΌ λ€λ‰ λ“±λ΅ : /files β†’ POST

### π»Β 2-5. PUT κΈ°λ° λ“±λ΅ νΉμ§•

- ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ URIλ¥Ό μ•κ³  μμ–΄μ•Ό ν•λ‹¤.
    - νμΌ λ“±λ΅ : /files/{filename} β†’ PUT
    - PUT : /files/star.jpg
- ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¦¬μ†μ¤μ URIλ¥Ό μ§€μ •ν•λ‹¤.
- μ¤ν† μ–΄(Store)
    - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ μ €μ¥μ†
    - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬
    - μ—¬κΈ°μ„ μ¤ν† μ–΄λ” /files

### π»Β 2-6. HTML FORM μ‚¬μ©

- HTML FORMμ€ GET, POSTλ§ μ§€μ›
- AJAX κ°™μ€ κΈ°μ μ„ μ‚¬μ©ν•΄μ„ ν•΄κ²° κ°€λ¥ β†’ νμ› API μ°Έκ³ 
- GET, POSTλ§ μ§€μ›ν•λ―€λ΅ μ μ•½μ΄ μλ‹¤.
- μμ‹)
    - νμ› λ©λ΅ : /members β†’ GET
    - νμ› λ“±λ΅ νΌ : /members/new β†’ GET
    - νμ› λ“±λ΅ : /members/new, /members β†’ POST
    - νμ› μ΅°ν : /members/{id} β†’ GET
    - νμ› μμ • νΌ : /members/{id}/edit β†’ GET
    - νμ› μμ • : /members/{id}/edit, /members/{id} β†’ POST
    - νμ› μ‚­μ  : /members/{id}/delete β†’ POST

### π»Β 2-6. HTML FORM μ‚¬μ© νΉμ§•

- HTML FORMμ€ GET, POSTλ§ μ§€μ›
- μ»¨νΈλ΅¤ URI
    - GET, POSTλ§ μ§€μ›ν•λ―€λ΅ μ μ•½μ΄ μμ
    - μ΄λ° μ μ•½μ„ ν•΄κ²°ν•κΈ° μ„ν•΄ λ™μ‚¬λ΅ λ λ¦¬μ†μ¤ κ²½λ΅λ¥Ό μ‚¬μ©
    - POSTμ /new, /edit, /deleteκ°€ μ»¨νΈλ΅¤ URI
    - HTTP λ©”μ„λ“λ΅ ν•΄κ²°ν•κΈ° μ• λ§¤ν• κ²½μ° μ‚¬μ©(HTTP API ν¬ν•¨)

### π»Β 2-7. API μ„¤κ³„ μ •λ¦¬

- HTTP API - μ»¬λ ‰μ…
    - POST κΈ°λ° λ“±λ΅
    - μ„λ²„κ°€ λ¦¬μ†μ¤ URI κ²°μ •
- HTTP API - μ¤ν† μ–΄
    - PUT κΈ°λ° λ“±λ΅
    - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ URI κ²°μ •
- HTML FORM μ‚¬μ©
    - μμ HTML + HTML form μ‚¬μ©
    - GET, POSTλ§ μ§€μ›

### π»Β 2-8. μ°Έκ³ ν•λ©΄ μΆ‹μ€ URI μ„¤κ³„ κ°λ…

- λ¬Έμ„(document)
    - λ‹¨μΌ κ°λ…(νμΌ ν•λ‚, κ°μ²΄ μΈμ¤ν„΄μ¤, λ°μ΄ν„°λ² μ΄μ¤ row)
    - μ) /members/100, /files/star.jpg
- μ»¬λ ‰μ…(collection)
    - μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν„°λ¦¬
    - μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
    - μ) /members
- μ¤ν† μ–΄(store)
    - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” μμ› μ €μ¥μ†
    - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬
    - μ) /files
- μ»¨νΈλ΅¤λ¬(controller), μ»¨νΈλ΅¤ URI
    - λ¬Έμ„, μ»¬λ ‰μ…, μ¤ν† μ–΄λ΅ ν•΄κ²°ν•κΈ° μ–΄λ ¤μ΄ μ¶”κ°€ ν”„λ΅μ„Έμ¤ μ‹¤ν–‰
    - λ™μ‚¬λ¥Ό μ§μ ‘ μ‚¬μ©
    - μ) /members/{id}/delete